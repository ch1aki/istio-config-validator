testCases:
  - description: happy path users
    wantMatch: true
    request:
      authority: ["www.example.com", "example.com"]
      method: ["GET", "POST"]
      uri: ["/users", "/users/"]
      headers:
        x-user-id: abc123
    route:
    - destination:
        host: users.users.svc.cluster.local
        port:
          number: 80
  - description: Partner service only accepts GET or OPTIONS
    wantMatch: false
    request:
      authority: ["example.com"]
      method: ["PUT", "POST", "PATCH"]
      uri: ["/partners", "/partners/1"]
    route:
    - destination:
        host: partner.partner.svc.cluster.local
  - description: Reseller is rewritten as partner
    wantMatch: true
    request:
      authority: ["example.com"]
      method: ["PUT", "POST", "PATCH"]
      uri: ["/reseller"]
    route:
    - destination:
        host: partner.partner.svc.cluster.local
    rewrite:
      uri: "/partner"
  - description: Reseller doesn't match rewritten as catalog
    wantMatch: false
    request:
      authority: ["example.com"]
      method: ["PUT", "POST", "PATCH"]
      uri: ["/reseller"]
    route:
    - destination:
        host: catalog.catalog.svc.cluster.local
    rewrite:
      uri: "/catalog"
